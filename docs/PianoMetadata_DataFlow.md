# Piano Metadata - Data Flow Diagram

```
???????????????????????????????????????????????????????????????????
?                      USER INTERACTION                            ?
???????????????????????????????????????????????????????????????????
                              ?
                              ?
???????????????????????????????????????????????????????????????????
?                  MAINWINDOW UI CONTROLS                          ?
?                                                                   ?
?  ????????????????  ??????????????  ????????????????            ?
?  ? ComboPiano   ?  ?TxtDimension?  ?ComboScale    ?            ?
?  ? Type         ?  ?            ?  ?Break         ?            ?
?  ????????????????  ??????????????  ????????????????            ?
?                                                                   ?
?  ????????????????  ??????????????                               ?
?  ?TxtManu-      ?  ?TxtModel    ?                               ?
?  ?facturer      ?  ?            ?                               ?
?  ????????????????  ??????????????                               ?
???????????????????????????????????????????????????????????????????
                              ?
                              ? UpdatePianoMetadataFromUI()
                              ?
???????????????????????????????????????????????????????????????????
?                  PIANOMETADATA MODEL                             ?
?                                                                   ?
?  public class PianoMetadata {                                    ?
?    PianoType Type;           // Spinet ? Concert Grand           ?
?    int DimensionCm;          // Height (upright) / Length (grand)?
?    int ScaleBreakMidiNote;   // Typically F2 (MIDI 41)          ?
?    string Manufacturer;      // e.g., "Yamaha"                  ?
?    string Model;             // e.g., "C3X"                     ?
?  }                                                                ?
???????????????????????????????????????????????????????????????????
                              ?
                              ? SAVE / LOAD
                              ?
???????????????????????????????????????????????????????????????????
?              MEASUREMENT STORAGE SERVICE                         ?
?                                                                   ?
?  SaveMeasurements(filePath, measurements, pianoMetadata)         ?
?  LoadMeasurements(filePath) ? (measurements, metadata)           ?
???????????????????????????????????????????????????????????????????
                              ?
                              ?
???????????????????????????????????????????????????????????????????
?                       JSON FILE (v1.1)                           ?
?                                                                   ?
?  {                                                                ?
?    "Version": "1.1",                                              ?
?    "PianoMetadata": {                                             ?
?      "Type": "ParlorGrand",                                       ?
?      "DimensionCm": 185,                                          ?
?      "ScaleBreakMidiNote": 41,                                    ?
?      "Manufacturer": "Yamaha",                                    ?
?      "Model": "C3X"                                               ?
?    },                                                             ?
?    "Measurements": [ ... ]                                        ?
?  }                                                                ?
???????????????????????????????????????????????????????????????????
                              ?
                              ? FUTURE USE
                              ?
???????????????????????????????????????????????????????????????????
?              AURISCALCULATE (Calculation App)                    ?
?                                                                   ?
?  Uses PianoMetadata to:                                          ?
?  • Select appropriate Railsback stretch curve                    ?
?  • Estimate inharmonicity coefficient (B) range                  ?
?  • Flag scale break region for special handling                 ?
?  • Validate measurement consistency with piano type              ?
???????????????????????????????????????????????????????????????????
```

## Inharmonicity Coefficient (B) by Piano Type

```
High B (More Inharmonic)
   ?
   ?  ?????????????????????
   ?  ? Spinet            ?  B ? 500-2000 × 10??
   ?  ?????????????????????
   ?  ?????????????????????
   ?  ? Console           ?  B ? 300-800 × 10??
   ?  ?????????????????????
   ?  ?????????????????????
   ?  ? Professional      ?  B ? 200-500 × 10??
   ?  ? Upright           ?
   ?  ?????????????????????
   ?  ?????????????????????
   ?  ? Baby Grand        ?  B ? 150-400 × 10??
   ?  ?????????????????????
   ?  ?????????????????????
   ?  ? Parlor Grand      ?  B ? 100-300 × 10??
   ?  ?????????????????????
   ?  ?????????????????????
   ?  ? Semi-Concert      ?  B ? 50-200 × 10??
   ?  ? Grand             ?
   ?  ?????????????????????
   ?  ?????????????????????
   ?  ? Concert Grand     ?  B ? 30-150 × 10??
   ?  ?????????????????????
Low B (More Harmonic)
```

## Scale Break Location

```
Piano Keyboard Layout:

   Bass Section          ? Tenor Section    ? Treble
  (Copper-wound)         ? (Plain steel)    ?
                         ?                  ?
A0 ????????????? E2/F2/F#2 ??????????????? C8
                    ?
                    ?
              Scale Break
           (MIDI 40-42)
           
- Abrupt change in inharmonicity
- Critical region for tuning curve
- Requires careful measurement
```

## Scientific References Flow

```
???????????????????????????????????????
?  Scientific Literature              ?
???????????????????????????????????????
? • Conklin (1996)                    ????
?   ? B varies with piano size        ?  ?
?                                     ?  ?
? • Askenfelt & Jansson (1990)        ?  ?
?   ? Scale break significance        ?  ??? Design Decisions
?                                     ?  ?
? • Railsback (1938)                  ?  ?
?   ? Stretch depends on size         ?  ?
?                                     ?  ?
? • Fletcher & Rossing (1998)         ????
?   ? Longitudinal waves in short     ?
?     strings                         ?
???????????????????????????????????????
                   ?
                   ?
???????????????????????????????????????
?  Implementation in AurisMeasure     ?
???????????????????????????????????????
? • PianoType enum (8 categories)     ?
? • DimensionCm field                 ?
? • ScaleBreakMidiNote field          ?
? • Metadata in JSON (v1.1)           ?
???????????????????????????????????????
```

---

**Purpose**: This diagram illustrates how piano metadata flows through the application, from user input to storage and future use in tuning curve calculation.
